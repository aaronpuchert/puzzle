#!/bin/bash

# Donald E. Knuth, The Art of Computer Programming, Vol. 4A, pp. 324--347
PURE="
SEND+A+TAD+MORE=MONEY
COUPLE+COUPLE=QUARTET
SATURN+URANUS+NEPTUNE+PLUTO=PLANETS
EARTH+AIR+FIRE+WATER=NATURE
HIP*HIP=HURRAY
PI*R*R=AREA
NORTH/SOUTH=EAST/WEST
TWENTY=SEVEN+SEVEN+SIX
TWELVE+NINE+TWO=ELEVEN+SEVEN+FIVE
"
NONPURE="
VIOLIN+VIOLIN+VIOLA=TRIO+SONATA
TWO*TWO=SQUARE
"
SPECIAL="
A/BC+D/EF+G/HI=1
"

# ZEITmagazin, 19/2014, S. 44
ZEIT_I="
JANUAR+FEBRUAR=STAUSEE
MAERZ+APRIL=MELKEN
MAI+JUNI+JULI=ALPIN
"

# ZEITmagazin, 37/2014, S. 95
# Replaced umlauts, because puzzle works only with ASCII.
ZEIT_II="
GABEL+LOFFEL=IRRWEGE
GABEL+GABEL=ABZUGE
GABEL+MESSER=DOLLAR
"

# choose examples
EXAMPLES=${PURE}${ZEIT_I}${ZEIT_II}

PASS=0
FAIL=0
for EX in $EXAMPLES; do
	NUM=$(./puzzle $EX | grep solutions | sed -e "s/ solutions found.//g")
	if [ $NUM -eq 1 ]; then
		echo -e "$EX \e[32mpassed\e[0m"
		PASS=$((PASS+1))
	else
		echo -e "$EX \e[31mnot passed\e[0m: $NUM solutions"
		FAIL=$((FAIL+1))
	fi
done

echo -e "\e[1m$PASS passed, $FAIL failed.\e[0m"
exit $FAIL
